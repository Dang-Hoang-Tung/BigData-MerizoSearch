
- name: Download the CATHDB data
  hosts: workergroup
  tasks:
    - name: Create temp folder for incomplete downloads
      ansible.builtin.file:
        path: /home/almalinux/tmp
        state: directory
        mode: 0755

    - name: Download the CATHDB data
      ansible.builtin.get_url:
        url: "http://bioinfadmin.cs.ucl.ac.uk/downloads/merizo_search/cath_foldclassdb.tar.gz"
        dest: /home/almalinux
        tmp_dest: /home/almalinux/tmp

    - name: Remove temp folder
      ansible.builtin.file:
        path: /home/almalinux/tmp
        state: absent

    - name: Create CATHDB directory
      ansible.builtin.file:
        path: /home/almalinux/cath_foldclassdb
        state: directory
        mode: 0755
        owner: almalinux
        group: almalinux

    - name: Extract the CATHDB archive
      ansible.builtin.unarchive:
        remote_src: true
        src: /home/almalinux/cath_foldclassdb.tar.gz
        dest: /home/almalinux/cath_foldclassdb

    - name: Remove the CATHDB archive
      ansible.builtin.file:
        path: /home/almalinux/cath_foldclassdb.tar.gz
        state: absent
